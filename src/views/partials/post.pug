include ./page-title.pug

mixin post({ product_name, product_slug, post_id, post_text, img, img_url, twitter_name, twitter_screen_name, date_str, show_opts = true, show_view_btn = true })
  div(class="p-4 rounded-xl bg-gray-100 dark:bg-gray-700 dark:border-gray-700 mb-4" data-post-id=post_id)
    div(class="flex flex-col sm:flex-row sm:items-center justify-between mb-4")
      div(class="flex items-center mb-4 sm:mb-0")
        img(src=img class="w-10 h-10 rounded-full mr-4")
        div(class="flex flex-col")
          span(class="font-bold")= twitter_name
          div(class="flex items-center text-xs text-gray-600 dark:text-gray-400")
            a(class="mr-2" href=`https://twitter.com/${twitter_screen_name}` target="_blank" rel="noreferrer noopener")= `@${twitter_screen_name}`
            span(class="mr-2") &mdash;
            span(class="flex items-center")
              ion-icon(name="time-outline" class="mr-2")
              span= date_str
      div(class="icon-container")
        ion-icon(name="link-outline" class="text-xl" data-tippy-content="Copy link")
        if show_opts
          div(class="relative inline-block ml-4")
            button(class="btn btn-icon btn-small icon-container" data-ctx-menu-trigger data-tippy-content="Actions")
              ion-icon(name="ellipsis-horizontal-outline" class="text-xl")
            div(data-ctx-menu class="hidden absolute top-8 -right-2 bg-white shadow-md rounded-xl dark:bg-gray-800" style="min-width: 150px;")
              +page-title(class="px-4 py-2 inline-block w-full") Actions
              div(class="py-2")
                button(data-ctx-action="delete" data-post-id=post_id class="flex items-center btn btn-danger px-4 btn-text w-full text-left rounded-none")
                  span(class="icon-container mr-2")
                    ion-icon(name="trash-outline")
                  span Delete

    div(class="__md my-8")
      img(data-image data-zoomable src=img_url class={"hidden": !img_url, "cursor-pointer mr-4 mb-4 rounded-md": true})
      div(data-content="data-content")
        block

    div(class="flex items-center justify-between")
      div(title=`Boost ${product.name} to show it's creator that you care about it. This also helps the product get better haptic rank.` class="text-xs select-none cursor-pointer block px-2 py-1 mr-4 rounded-xl border border-gray-300 hover:border-transparent dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600" data-post-boost-btn)
            span(class="flex justify-between")
              span(class="flex items-center")
                span(class="icon-container")
                  ion-icon(name="rocket-outline" class="text-xl mr-4")
                span(class="mr-4")= `Boost`
              span(class="px-4 py-1 bg-yellow-300 font-medium text-gray-800 rounded-full text-xs uppercase" data-product-boost-counter)= 5
      div(class="flex items-center")
        a(href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="icon-container" data-text=`Update on ${product_name} ðŸš€` data-url="https://haptic.so" data-via="hapticso" data-hashtags="buildinpublic #onhapticso" data-show-count="false" data-tippy-content="Share on Twitter")
          ion-icon(name="logo-twitter")
        if show_view_btn
          a(href=`/p/${product_slug}/${post_id}` class="icon-container btn btn-icon ml-4" data-post-link data-tippy-content="Open") 
            ion-icon(name="eye-outline" class="text-xl")
