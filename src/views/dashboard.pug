extends layouts/base.layout.pug

include partials/top-bar.pug
include partials/modal.pug
include partials/page-title.pug
include partials/flash-msg.pug

block content
  +top-bar
  
  div(class="container mx-auto p-4")
    section
      +page-title(class="mb-4") Products
      +flash-msg(flash)

      div(class="grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3")
        each product in products
          a(href=`/dashboard/product/${product.slug}/posts`)
            div(class="bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 h-full rounded-xl p-4" style="min-height: 100px;")
              h1(class="text-xl font-bold pb-4")= product.name
              if product.description
                p= product.description

        div(class="cursor-pointer font-medium text-gray-600 dark:text-gray-200" id="create-product-btn")
          div(id="create-product" class="bg-gray-50 hover:bg-gray-100 dark:bg-gray-700 dark:hover:bg-gray-600 rounded-xl h-full w-full md:w-auto p-4 flex items-center justify-center" style="min-height: 100px;")
            div(class="flex items-center justify-center icon-container")
              ion-icon(name="add-outline" class="pr-2 text-2xl")
              span New product

block modals
  +modal("create-product-modal", { style: "width: 300px;" })
    h2(class="font-medium text-gray-600 dark:text-gray-200 text-xs uppercase") Create product
    form(action="/create-product" method="POST" id="create-product-form")
      div(class="pt-8")
        div(class="pb-4")
          label
            div(class="label pb-1 pl-1") Name
            input(
              class="input"
              type="text"
              id="product-name"
              name="name"
              placeholder="Your product name"
              autocomplete="off"
            )
        div(class="pb-4")
          label
            div(class="label pb-1 pl-1") Slug
            div(class="relative flex items-center")
              div(class="absolute left-0 ml-4" style="top: 50%; transform: translateY(-50%)") /
              input(
                  class="input mr-2 pl-6"
                  type="text"
                  id="product-slug"
                  name="slug"
                  placeholder="your-product-slug"
                  disabled="disabled"
                )
              button(class="btn btn-default" type="button" data-form-gen-slug-btn disabled="disabled") Generate
        div(class="hidden mb-4 error-container" data-form-error)
      button(class="btn btn-primary w-full" type="submit" disabled="disabled") Create

block append scripts
  script(src="/static/js/dashboard.js")
